---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCard from '../components/PostCard.astro';
import { getCollection } from 'astro:content';

const ordering = new Map([
  ['Vintage Media', 0],
  ['Commercial', 1],
  ['Wedding Films', 2],
  ['Historical Research', 3],
]);

const allowedSlugs = new Set([
  'vintage-photo-video',
  'commercial-photo-video',
  'retro-wedding-videography',
  'abandoned-buildings-ny',
]);

const services = (await getCollection('services'))
  .filter(service => !service.data.draft && allowedSlugs.has(service.slug))
  .sort((a, b) => {
    const aTitle = a.data.listingTitle ?? a.data.title;
    const bTitle = b.data.listingTitle ?? b.data.title;
    const aRank = ordering.get(aTitle) ?? Number.MAX_SAFE_INTEGER;
    const bRank = ordering.get(bTitle) ?? Number.MAX_SAFE_INTEGER;
    if (aRank !== bRank) return aRank - bRank;
    return aTitle.localeCompare(bTitle);
  });
---

<BaseLayout title="Bryant Neal">
    
  <div class="index-content framed" style="margin-top: .5rem; margin-bottom: 1rem;">

  <h1 id="hello-there">Hello There!</h1>

  <p>I'm <strong>Bryant Neal</strong> a fulltime filmmaker, photographer, and analog-to-digital archivist in Rochester, NY. I make Super 8, Camcorder, and Modern 4K films, and I preserve stories by converting VHS & film to modern formats.</p>

  <div style="text-align: right;">
    <a href="/about/" class="button">About Me</a>
  </div>

  <div style="margin-top: .5rem;"></div>

  </div>

  <div class="services">
    {services.map((service) => <PostCard post={service} />)}
  </div>


  <hr class="index-accent-line" aria-hidden="true" />


</BaseLayout>
